<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager en Minikube</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
        }
        
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.2em;
        }
        
        .cluster {
            border: 4px solid #e74c3c;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #fff5f5 0%, #ffebee 100%);
            position: relative;
        }
        
        .cluster-title {
            position: absolute;
            top: -15px;
            left: 20px;
            background: #e74c3c;
            color: white;
            padding: 8px 20px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .single-node {
            border: 3px solid #3498db;
            border-radius: 15px;
            padding: 20px;
            background: linear-gradient(135deg, #f8fbff 0%, #e3f2fd 100%);
            position: relative;
            margin-top: 20px;
        }
        
        .node-title {
            position: absolute;
            top: -12px;
            left: 15px;
            background: #3498db;
            color: white;
            padding: 5px 15px;
            border-radius: 10px;
            font-weight: bold;
        }
        
        .pods-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .pod {
            border: 2px solid #27ae60;
            border-radius: 12px;
            padding: 15px;
            background: linear-gradient(135deg, #f0fff4 0%, #e8f5e8 100%);
            position: relative;
            min-height: 140px;
        }
        
        .pod-title {
            position: absolute;
            top: -10px;
            left: 10px;
            background: #27ae60;
            color: white;
            padding: 4px 12px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .container-box {
            background: #f39c12;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            margin: 5px 0;
            font-weight: bold;
            text-align: center;
        }
        
        .pod-info {
            margin-top: 10px;
            font-size: 0.85em;
            color: #2c3e50;
        }
        
        .service {
            border: 2px solid #9b59b6;
            border-radius: 10px;
            padding: 15px;
            background: linear-gradient(135deg, #faf5ff 0%, #f3e5f5 100%);
            margin: 10px 0;
            position: relative;
        }
        
        .service-title {
            position: absolute;
            top: -10px;
            left: 10px;
            background: #9b59b6;
            color: white;
            padding: 4px 12px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .persistent-volume {
            border: 2px solid #e67e22;
            border-radius: 10px;
            padding: 15px;
            background: linear-gradient(135deg, #fef9e7 0%, #fdf2e9 100%);
            margin-top: 20px;
            position: relative;
        }
        
        .pv-title {
            position: absolute;
            top: -10px;
            left: 10px;
            background: #e67e22;
            color: white;
            padding: 4px 12px;
            border-radius: 8px;
            font-weight: bold;
            font-size: 0.9em;
        }
        
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
        }
        
        .traffic-flow {
            margin-top: 30px;
            padding: 20px;
            background: #f1f2f6;
            border-radius: 15px;
        }
        
        .flow-step {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .arrow {
            color: #e74c3c;
            font-size: 1.5em;
            margin: 0 15px;
        }
        
        .real-architecture {
            background: #2ecc71;
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .commands {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }
        
        .code {
            font-family: 'Courier New', monospace;
            background: #34495e;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄTask Manager en Minikube</h1>
        
        
        <!-- MINIKUBE CLUSTER -->
        <div class="cluster">
            <div class="cluster-title">üè¢ MINIKUBE CLUSTER (Un solo nodo control-plane)</div>
            
            <!-- SINGLE NODE -->
            <div class="single-node">
                <div class="node-title">üñ•Ô∏è minikube (control-plane) - v1.33.1</div>
                
                <div class="pods-grid">
                    <!-- Frontend Pod -->
                    <div class="pod">
                        <div class="pod-title">üì± frontend-6cfd7c46-rs4wp</div>
                        <div class="container-box">üê≥ Nginx + HTML/JS Container</div>
                        <div class="pod-info">
                            <strong>Pod IP:</strong> 10.244.0.7<br>
                            <strong>Puerto:</strong> 80<br>
                            <strong>Status:</strong> Running<br>
                            <strong>Age:</strong> 111m<br>
                            <strong>Ready:</strong> 1/1
                        </div>
                    </div>
                    
                    <!-- Backend Pod -->
                    <div class="pod">
                        <div class="pod-title">‚öôÔ∏è backend-6b76759676-r9852</div>
                        <div class="container-box">üê≥ Python Flask Container</div>
                        <div class="container-box" style="background: #e67e22; margin-top: 5px;">üì¶ SQLite + PVC Mount</div>
                        <div class="pod-info">
                            <strong>Pod IP:</strong> 10.244.0.6<br>
                            <strong>Puerto:</strong> 5000<br>
                            <strong>Status:</strong> Running<br>
                            <strong>Age:</strong> 111m<br>
                            <strong>Ready:</strong> 1/1
                        </div>
                    </div>
                    
                    <!-- VictoriaMetrics Pod -->
                    <div class="pod">
                        <div class="pod-title">üìä victoria-metrics-577f7cf9f5-mhxs2</div>
                        <div class="container-box">üê≥ VictoriaMetrics Container</div>
                        <div class="pod-info">
                            <strong>Pod IP:</strong> 10.244.0.8<br>
                            <strong>Puerto:</strong> 8428<br>
                            <strong>Status:</strong> Running<br>
                            <strong>Age:</strong> 111m<br>
                            <strong>Ready:</strong> 1/1
                        </div>
                    </div>
                    
                    <!-- VMAgent Pod -->
                    <div class="pod">
                        <div class="pod-title">üîç vmagent-5d48b7f985-n2ml5</div>
                        <div class="container-box">üê≥ VMAgent Container</div>
                        <div class="pod-info">
                            <strong>Pod IP:</strong> 10.244.0.9<br>
                            <strong>Puerto:</strong> 8429<br>
                            <strong>Status:</strong> Running<br>
                            <strong>Age:</strong> 111m<br>
                            <strong>Ready:</strong> 1/1<br>
                            <strong>Role:</strong> M√©trica Collector
                        </div>
                    </div>
                </div>
                
                <!-- Services -->
                <div style="margin-top: 20px;">
                    <h4>üîó Services (ClusterIP)</h4>
                    
                    <div class="service">
                        <div class="service-title">frontend</div>
                        <strong>ClusterIP:</strong> 10.104.205.255 | <strong>Port:</strong> 80/TCP
                    </div>
                    
                    <div class="service">
                        <div class="service-title">backend</div>
                        <strong>ClusterIP:</strong> 10.97.120.114 | <strong>Port:</strong> 5000/TCP
                    </div>
                    
                    <div class="service">
                        <div class="service-title">victoria-metrics</div>
                        <strong>ClusterIP:</strong> 10.102.195.102 | <strong>Port:</strong> 8428/TCP
                    </div>
                    
                    <div class="service">
                        <div class="service-title">vmagent</div>
                        <strong>ClusterIP:</strong> 10.104.183.10 | <strong>Port:</strong> 8429/TCP
                    </div>
                </div>
                
                <!-- Persistent Volume -->
                <div class="persistent-volume">
                    <div class="pv-title">üíæ Persistent Volume para SQLite</div>
                    <strong>PVC:</strong> sqlite-pvc (Bound)<br>
                    <strong>Volume:</strong> pvc-0f3cc17b-6df2-4761-9987-644065d9dfc4<br>
                    <strong>Capacity:</strong> 1Gi<br>
                    <strong>StorageClass:</strong> standard<br>
                    <strong>Access Mode:</strong> ReadWriteOnce
                </div>
            </div>
        </div>
        
        <!-- FLUJO DE TR√ÅFICO -->
        <div class="traffic-flow">
            <h3>üîÑ Flujo en Task Manager</h3>
            
            <div class="flow-step">
                <span>üë§ Usuario accede via minikube service frontend</span>
                <span class="arrow">‚Üí</span>
                <span>üîó Frontend Service (10.104.205.255:80)</span>
            </div>
            
            <div class="flow-step">
                <span>üîó Frontend Service</span>
                <span class="arrow">‚Üí</span>
                <span>üì± Frontend Pod (10.244.0.7) - Nginx</span>
            </div>
            
            <div class="flow-step">
                <span>üì± JavaScript hace fetch() al API</span>
                <span class="arrow">‚Üí</span>
                <span>üîó Backend Service (10.97.120.114:5000)</span>
            </div>
            
            <div class="flow-step">
                <span>üîó Backend Service</span>
                <span class="arrow">‚Üí</span>
                <span>‚öôÔ∏è Backend Pod (10.244.0.6) - Flask</span>
            </div>
            
            <div class="flow-step">
                <span>‚öôÔ∏è Flask lee/escribe</span>
                <span class="arrow">‚Üí</span>
                <span>üíæ SQLite en Persistent Volume (1Gi)</span>
            </div>
            
            <div class="flow-step">
                <span>üîç VMAgent recolecta m√©tricas</span>
                <span class="arrow">‚Üí</span>
                <span>üìä VictoriaMetrics almacena</span>
            </div>
        </div>
        
        <!-- ARQUITECTURA -->
        <div class="architecture">
            <h3>‚úÖ Arquitectura Implementada</h3>
            <div style="background: #27ae60; padding: 15px; border-radius: 8px; margin-top: 10px;">
                <strong>‚úÖ Frontend:</strong> Nginx + HTML/JS/CSS (Pod: frontend-6cfd7c46-rs4wp)<br>
                <strong>‚úÖ Backend:</strong> Python Flask con SQLite persistente (Pod: backend-6b76759676-r9852)<br>
                <strong>‚úÖ Database:</strong> SQLite en Persistent Volume de 1Gi (¬°Ya no se pierden datos!)<br>
                <strong>‚úÖ Monitoring:</strong> VictoriaMetrics + VMAgent funcionando<br>
                <strong>‚úÖ Cluster:</strong> Minikube single-node (control-plane)<br>
                <strong>‚úÖ Total Pods:</strong> 4 pods corriendo en un solo nodo
            </div>
        </div>
        
        <!-- COMANDOS √öTILES -->
        <div class="commands">
            <h3>üíª Comandos √∫tiles para setup</h3>
            <div class="code">
                # Acceder al frontend<br>
                minikube service frontend<br><br>
                
                # Ver m√©tricas de VictoriaMetrics<br>
                minikube service victoria-metrics<br><br>
                
                # Ver logs del backend<br>
                kubectl logs backend-6b76759676-r9852<br><br>
                
                # Acceder al contenedor Flask<br>
                kubectl exec -it backend-6b76759676-r9852 -- /bin/bash<br><br>
                
                # Ver el SQLite persistente<br>
                kubectl exec -it backend-6b76759676-r9852 -- ls -la /app/<br><br>
                
                # Port-forward para desarrollo<br>
                kubectl port-forward svc/backend 5000:5000<br>
                kubectl port-forward svc/victoria-metrics 8428:8428
            </div>
        </div>
        
        <!-- LEYENDA -->
        <div class="legend">
            <h3 style="grid-column: 1/-1; margin: 0 0 15px 0;">üìã Componentes de Task Manager</h3>
            
            <div class="legend-item">
                <div class="legend-color" style="background: #e74c3c;"></div>
                <span><strong>Minikube:</strong> Cluster de Kubernetes local</span>
            </div>
            
            <div class="legend-item">
                <div class="legend-color" style="background: #3498db;"></div>
                <span><strong>Node:</strong> minikube (control-plane)</span>
            </div>
            
            <div class="legend-item">
                <div class="legend-color" style="background: #27ae60;"></div>
                <span><strong>Pods:</strong> 4 pods corriendo aplicaciones</span>
            </div>
            
            <div class="legend-item">
                <div class="legend-color" style="background: #f39c12;"></div>
                <span><strong>Containers:</strong> Nginx, Flask, VictoriaMetrics, VMAgent</span>
            </div>
            
            <div class="legend-item">
                <div class="legend-color" style="background: #9b59b6;"></div>
                <span><strong>Services:</strong> IPs estables para acceso</span>
            </div>
            
            <div class="legend-item">
                <div class="legend-color" style="background: #e67e22;"></div>
                <span><strong>PVC:</strong> 1Gi storage persistente para SQLite</span>
            </div>
        </div>
    </div>
</body>
</html>